(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{67:function(e,t,n){},97:function(e,t,n){},98:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n(25),r=n.n(a),s=(n(66),n(7)),o=(n(67),n(12)),i=n(16),l=n(106),d=n(107),u=n(108),j=n(109),b=n(110),m=n(111),h=n(112),f=n(8),p=n.n(f),x=n(11),O=n(26),g=n(19),y=n(58),w=n(120),v=n(99),N=n(100),k=n(101),S=n(102),C=n(103),_=n(104),I=n(105),T=n(1),P=function(){var e=Object(c.useState)(!1),t=Object(s.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),o=Object(s.a)(r,2),i=o[0],l=o[1],d=Object(c.useState)(!1),u=Object(s.a)(d,2),j=u[0],b=u[1],m=function(){H(null),J({title:"",body:"",imageUrl:""}),E(!1),b(!j)},h=Object(c.useState)(!1),f=Object(s.a)(h,2),P=f[0],E=f[1],D=Object(c.useState)({title:"",body:"",imageUrl:""}),F=Object(s.a)(D,2),R=F[0],J=F[1],U="",B=Object(c.useState)(null),M=Object(s.a)(B,2),A=M[0],H=M[1],L=function(e){J(Object(g.a)(Object(g.a)({},R),{},Object(O.a)({},e.target.name,e.target.value)))},G=function(){var e=Object(x.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E(!0),A){e.next=4;break}return W(),e.abrupt("return");case 4:if(A.type.includes("image")){e.next=9;break}return l("Only images and GIFs are allowed"),a(!0),E(!1),e.abrupt("return");case 9:return(t=new FormData).append("file",A),t.append("upload_preset","socio1508"),t.append("cloud_name","socio1508"),e.next=15,fetch("https://api.cloudinary.com/v1_1/socio1508/image/upload",{method:"POST",body:t}).then((function(e){return e.json()})).then((function(e){U+=e.url,W()})).catch((function(e){return console.log(e)}));case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(x.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/post",{method:"POST",headers:{"x-auth-token":localStorage.getItem("socio_token"),"Content-Type":"application/json"},body:JSON.stringify({title:R.title,body:R.body,imageUrl:U})}).then((function(e){return e.json()})).then((function(e){E(!1),m()})).catch((function(e){E(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(T.jsxs)("div",{children:[Object(T.jsx)(y.a,{className:"mx-3",style:{backgroundColor:"transparent",border:"none"},onClick:m,children:Object(T.jsx)("i",{className:"fas fa-2x fa-plus-circle",onClick:m})}),Object(T.jsxs)(w.a,{className:"py-3",style:{color:"black"},isOpen:j,toggle:m,children:[Object(T.jsxs)(v.a,{children:[Object(T.jsx)(N.a,{color:"danger",isOpen:n,toggle:function(){return a(!1)},children:i}),Object(T.jsxs)(k.a,{children:[Object(T.jsxs)(S.a,{children:[Object(T.jsx)(C.a,{htmlFor:"title",children:"Title"}),Object(T.jsx)(_.a,{className:"my-2 ",type:"text",name:"title",id:"title",placeholder:"Add title",value:R.title,onChange:L})]}),Object(T.jsxs)(S.a,{children:[Object(T.jsx)(C.a,{htmlFor:"body",children:"Body"}),Object(T.jsx)("textarea",{id:"body",name:"body",className:"my-2 form-control",rows:"4",value:R.body,onChange:L})]}),Object(T.jsx)(S.a,{children:Object(T.jsx)(_.a,{type:"file",className:"my-3",name:"file",id:"file",onChange:function(e){return H(e.target.files[0])}})})]})]}),Object(T.jsxs)(I.a,{children:[Object(T.jsx)(y.a,{disabled:!R.title||!R.body||P,onClick:G,color:"primary",children:P?"...":"Add"})," ",Object(T.jsx)(y.a,{color:"secondary",onClick:m,children:"Cancel"})]})]})]})},E=function(e){var t=Object(o.g)(),n=Object(c.useState)(!1),a=Object(s.a)(n,2),r=a[0],f=a[1],p=Object(c.useContext)(ne),x=p.state,O=p.dispatch;return Object(T.jsxs)(l.a,{className:"px-4 navbar",color:"dark",dark:!0,expand:"md",children:[Object(T.jsx)(d.a,{className:"socio",style:{margin:0,padding:0,fontSize:"40px"},children:Object(T.jsxs)("span",{className:"d-flex",children:[Object(T.jsx)(i.b,{className:"text-decoration-none text-white",to:x?"/":"/auth",children:"Socio"}),x?Object(T.jsx)(P,{}):null]})}),Object(T.jsx)(u.a,{onClick:function(){return f(!r)}}),Object(T.jsx)(j.a,{isOpen:r,navbar:!0,children:Object(T.jsx)(b.a,{className:"justify-content-end",style:{width:"100%"},navbar:!0,children:x?Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(m.a,{children:Object(T.jsx)(h.a,{children:Object(T.jsx)(i.b,{className:"text-decoration-none text-white me-4",to:"/profile",children:JSON.parse(localStorage.getItem("user")).name})})}),Object(T.jsx)(m.a,{children:Object(T.jsx)(h.a,{children:Object(T.jsx)(i.b,{to:"/following/posts",className:"text-decoration-none text-white fw-bolder me-4",children:"Following"})})}),Object(T.jsx)(m.a,{children:Object(T.jsx)(h.a,{children:Object(T.jsx)(i.b,{onClick:function(){localStorage.removeItem("socio_token"),localStorage.removeItem("user"),O({type:"CLEAR"}),t.push("/auth")},className:"text-decoration-none text-danger fw-bolder mr-4",children:"Logout"})})})]}):Object(T.jsx)(m.a,{children:Object(T.jsx)(h.a,{children:Object(T.jsx)(i.b,{className:"text-decoration-none text-white",to:"/auth",children:"Login"})})})})})]})},D=n(114),F=n(115),R=n(116),J=n(121),U=n(122),B=n(117),M=n(118),A=n(119),H=n(113),L=function(e){var t=e.comments,n=e.postId,a=Object(c.useState)(!1),r=Object(s.a)(a,2),o=r[0],i=r[1],l=function(){return i(!o)},d=Object(c.useState)(""),u=Object(s.a)(d,2),j=u[0],b=u[1],m=function(){var e=Object(x.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/post/comment",{method:"PUT",headers:{"Content-Type":"application/json","x-auth-token":localStorage.getItem("socio_token")},body:JSON.stringify({text:j,postId:n})}).then((function(e){return e.json()})).then((function(e){b("")})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(T.jsxs)("div",{children:[Object(T.jsx)(y.a,{style:{backgroundColor:"transparent",border:"none"},onClick:l,children:Object(T.jsx)("div",{className:"text-muted fs-6",style:{cursor:"pointer"},children:"View comments"})}),Object(T.jsxs)(w.a,{className:"py-3",style:{color:"black"},isOpen:o,toggle:l,children:[Object(T.jsx)(H.a,{children:Object(T.jsx)(y.a,{color:"danger",onClick:l,children:"Close"})}),Object(T.jsx)(v.a,{style:{maxHeight:"60vh",overflow:"scroll"},children:t.map((function(e){return Object(T.jsxs)("div",{className:"container d-flex align-items-start mb-2",children:[Object(T.jsx)("div",{className:"col-md-3 col-xs-12 fw-bolder fs-6 me-3",children:e.posted_by?e.posted_by.name:null}),Object(T.jsx)("div",{className:"col-md-9 col-xs-12 fs-6 mb-2",children:e.posted_by?e.text:null})]})}))}),Object(T.jsx)(I.a,{children:Object(T.jsxs)("div",{className:"d-flex justify-content-between align-items-center",style:{width:"100%"},children:[Object(T.jsx)(_.a,{type:"text",style:G,name:"comment",id:"comment",value:j,onChange:function(e){return b(e.target.value)},placeholder:"Add comment"}),Object(T.jsx)(y.a,{disabled:!j,color:"primary",onClick:m,children:"Post"})]})})]})]})},G={border:"none",marginRight:"10px",borderRadius:"1px",borderBottom:"1px solid gray",background:"transparent",color:"black"},W=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(JSON.parse(localStorage.getItem("user"))),o=Object(s.a)(r,2),l=o[0],d=(o[1],Object(c.useState)(!1)),u=Object(s.a)(d,2),j=u[0],b=u[1],m=function(){return b((function(e){return!e}))};Object(c.useEffect)((function(){return h()}),[n]);var h=function(){var e=Object(x.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/post",{method:"GET",headers:{"x-auth-token":localStorage.getItem("socio_token")}}).then((function(e){return e.json()})).then((function(e){a(e.posts)})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(x.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/post/".concat(n),{method:"PUT",headers:{"Content-Type":"application/json","x-auth-token":localStorage.getItem("socio_token")},body:JSON.stringify({postId:t})}).then((function(e){return e.json()})).then((function(e){return console.log("L")}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),O=function(){var e=Object(x.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0)){e.next=3;break}return e.next=3,fetch("/post/comment",{method:"PUT",headers:{"Content-Type":"application/json","x-auth-token":localStorage.getItem("socio_token")},body:JSON.stringify({text:t,postId:n})}).then((function(e){return e.json()})).then((function(e){console.log("C")})).catch((function(e){return console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=function(){var e=Object(x.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/post/".concat(t),{method:"DELETE",headers:{"x-auth-token":localStorage.getItem("socio_token")}}).then((function(e){return e.json()})).then((function(e){m()})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(T.jsx)("div",{className:"container my-5",children:n&&n.map((function(e){return Object(T.jsxs)("div",{children:[Object(T.jsx)("div",{className:"col-md-10 col-12 my-4",children:Object(T.jsxs)(D.a,{color:"dark",className:"p-3",children:[Object(T.jsxs)(F.a,{tag:"h4",color:"black",className:"mb-4 fw-bold d-flex justify-content-between align-items-center",children:[Object(T.jsxs)("div",{className:"d-flex justify-content-start align-items-center",children:[Object(T.jsx)("img",{src:e.posted_by.profile?e.posted_by.profile:"https://images.unsplash.com/photo-1485423036251-8b2a2909899f?ixid=MnwxMjA3fDB8MHxzZWFyY2h8MTl8fHBvcnRyYWl0fGVufDB8MnwwfHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",alt:"",className:"me-2 border border-white",style:{width:"40px",height:"40px",borderRadius:"50%"}}),Object(T.jsx)(i.b,{className:"text-decoration-none text-white",to:"/profile/".concat(e.posted_by._id!==l._id?e.posted_by._id:""),children:e.posted_by.name})]}),e.posted_by._id===l._id&&Object(T.jsxs)(R.a,{style:{cursor:"pointer"},direction:"left",isOpen:j,toggle:m,children:[Object(T.jsx)(J.a,{tag:"span","data-toggle":"dropdown","aria-expanded":j,children:Object(T.jsx)("i",{className:"fas fa-ellipsis-v"})}),Object(T.jsx)(U.a,{className:"bg-dark text-white border fw-bolder px-2 mt-5",children:Object(T.jsx)("div",{onClick:function(){return g(e._id)},children:"Delete"})})]})]}),e.photo?Object(T.jsx)("div",{className:"d-flex justify-content-center",children:Object(T.jsx)("img",{src:e.photo,style:{maxWidth:"100%",maxHeight:"500px"},alt:"Image",onDoubleClick:function(){return f(e._id,e.likes.includes(l._id))}})}):null,Object(T.jsxs)(B.a,{children:[Object(T.jsx)(F.a,{tag:"h5",children:e.title}),Object(T.jsx)(M.a,{className:"fs-6",style:{color:"gray"},children:e.body}),Object(T.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[e.likes.includes(l.id)?Object(T.jsx)("i",{className:"fas fa-2x my-1 fa-heart",style:{color:"red",cursor:"pointer"},onClick:function(){return f(e._id,"dislike")}}):Object(T.jsx)("i",{className:"far fa-2x my-1 fa-heart",style:{color:"red",cursor:"pointer"},onClick:function(){return f(e._id,"like")}}),Object(T.jsxs)(M.a,{className:"fs-6 mt-2",style:{color:"gray"},children:[e.likes.length," likes \xb7 ",e.comments.length," ","comments"]})]}),Object(T.jsx)(k.a,{onSubmit:function(t){t.preventDefault(),O(t.target[0].value,e._id),t.target[0].value=""},children:Object(T.jsxs)("div",{className:"d-flex justify-content-between align-items-end",children:[Object(T.jsx)(_.a,{type:"text",style:Y,name:"comment",id:"comment",placeholder:"Add comment"}),Object(T.jsx)(y.a,{color:"primary",children:"Post"})]})}),Object(T.jsx)(A.a,{className:"text-muted mt-4 fs-6",style:{cursor:"pointer"},children:Object(T.jsx)(L,{comments:e.comments,postId:e._id})})]})]})}),Object(T.jsx)("hr",{width:"83.5%"})]},e._id)}))})},Y={border:"none",marginTop:"30px",marginRight:"10px",borderRadius:"1px",borderBottom:"1px solid gray",background:"transparent",color:"white"},z=n(21),V=function(){var e=Object(c.useContext)(ne),t=(e.state,e.dispatch),n=Object(o.g)(),a=Object(c.useState)(!0),r=Object(s.a)(a,2),i=r[0],l=r[1],d=Object(c.useState)(!1),u=Object(s.a)(d,2),j=u[0],b=u[1],m=Object(c.useState)({error:!1,msg:""}),h=Object(s.a)(m,2),f=h[0],w=h[1],v=Object(c.useState)(null),I=Object(s.a)(v,2),P=I[0],E=I[1],R=Object(c.useState)(!1),J=Object(s.a)(R,2),U=J[0],H=J[1],L="",G=Object(c.useState)(!1),W=Object(s.a)(G,2),Y=W[0],V=W[1],K=Object(c.useState)({name:"",email:"",password:""}),Q=Object(s.a)(K,2),X=Q[0],$=Q[1],ee=function(e){$(Object(g.a)(Object(g.a)({},X),{},Object(O.a)({},e.target.name,e.target.value)))},te=function(){var e=Object(x.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(H(!0),P){e.next=4;break}return ce(),e.abrupt("return");case 4:if(P.type.includes("image")&&!P.type.includes("gif")){e.next=9;break}return w({error:!0,msg:"Only image type are allowed"}),V(!0),H(!1),e.abrupt("return");case 9:return(t=new FormData).append("file",P),t.append("upload_preset","socio1508"),t.append("cloud_name","socio1508"),e.next=15,fetch("https://api.cloudinary.com/v1_1/socio1508/image/upload",{method:"POST",body:t}).then((function(e){return e.json()})).then((function(e){L+=e.url,ce()})).catch((function(e){return console.log(e)}));case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=Object(x.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/auth/".concat(i?"login":"signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:X.name,email:X.email,password:X.password,profile:L||null})}).then((function(e){return e.json()})).then((function(e){w(e),V(!0),e.error||(localStorage.setItem("socio_token",e.token),localStorage.setItem("user",JSON.stringify(e.user)),t({type:"USER",payload:e.user}),n.push("/")),H(!1)})).catch((function(e){H(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(T.jsx)("div",{className:"container ",children:Object(T.jsx)(D.a,{color:"dark",className:"container col-md-6 mt-5 text-white",style:Z,children:Object(T.jsxs)(B.a,{children:[Object(T.jsx)(F.a,{tag:"h5",className:"text-center socio",style:{margin:0,padding:0,fontSize:"40px",fontFamily:"Grand Hotel', cursive"},children:"Socio"}),Object(T.jsx)(N.a,{color:f.error?"danger":"success",isOpen:Y,toggle:function(){return V(!1)},children:f.msg}),Object(T.jsx)(M.a,{children:Object(T.jsxs)(k.a,{children:[i?null:Object(T.jsx)(z.a,{in:!i,children:Object(T.jsxs)(S.a,{className:"my-4",children:[Object(T.jsx)(C.a,{htmlFor:"name",className:"mb-2",children:"Name"}),Object(T.jsx)(_.a,{style:q,type:"text",name:"name",id:"name",placeholder:"Enter name",value:X.name,onChange:ee})]})}),Object(T.jsxs)(S.a,{className:"my-4",children:[Object(T.jsx)(C.a,{htmlFor:"email",className:"mb-2",children:"Email"}),Object(T.jsx)(_.a,{style:q,type:"email",name:"email",id:"email",placeholder:"Enter email",value:X.email,onChange:ee})]}),Object(T.jsxs)(S.a,{className:"my-4",children:[Object(T.jsx)(C.a,{htmlFor:"password",className:"mb-2",children:"Password"}),Object(T.jsx)(_.a,{type:j?"text":"password",style:q,name:"password",id:"password",placeholder:"Enter password",value:X.password,onChange:ee}),Object(T.jsx)(C.a,{onClick:function(){return b(!j)},className:"text-muted float-end  mt-1",style:{fontSize:"12px",cursor:"pointer"},children:j?"Hide Password":"Show Password"})]}),i?null:Object(T.jsx)(z.a,{in:!i,children:Object(T.jsxs)(S.a,{className:"my-4",children:[Object(T.jsx)(C.a,{htmlFor:"name",className:"mb-2",children:"Choose Profile Picture"}),Object(T.jsx)("input",{type:"file",className:"my-3 form-control bg-dark text-white",name:"file",id:"file",onChange:function(e){return E(e.target.files[0])}})]})}),Object(T.jsx)(y.a,{disabled:U,color:"primary",onClick:te,children:i?"Login":"Register"})]})}),Object(T.jsx)(A.a,{tag:"h6",className:"my-2 text-muted d-flex flex-wrap ",children:i?Object(T.jsxs)(T.Fragment,{children:["Don't have an account ?",Object(T.jsx)("span",{children:Object(T.jsx)("p",{className:"text-primary mx-1",style:{cursor:"pointer"},onClick:function(){return l(!i)},children:"Register"})})]}):Object(T.jsxs)(T.Fragment,{children:["Already have an account ?",Object(T.jsx)("span",{children:Object(T.jsx)("p",{className:"text-primary mx-1",style:{cursor:"pointer"},onClick:function(){return l(!i)},children:"Login"})}),"here"]})})]})})})},q={border:"none",borderRadius:"1px",borderBottom:"1px solid gray",background:"transparent",color:"white"},Z={borderColor:"white"},K=function(e){var t=e.sentData,n=e.changeUser,a=e.changeProfile,r=Object(c.useRef)(null),i=(Object(o.g)(),Object(c.useContext)(ne)),l=(i.state,i.dispatch),d=Object(c.useState)(!1),u=Object(s.a)(d,2),j=u[0],b=u[1],m=Object(c.useState)(""),h=Object(s.a)(m,2),f=h[0],P=h[1],E=t.profile,D=Object(c.useState)(""),F=Object(s.a)(D,2),R=F[0],J=F[1],U=Object(c.useState)(!1),B=Object(s.a)(U,2),M=B[0],A=B[1],H=function(){Z({name:t.name,email:t.email,bio:t.bio}),Y(!1),A(!M)},L=Object(c.useState)(!1),G=Object(s.a)(L,2),W=G[0],Y=G[1],z=Object(c.useState)({name:t.name,email:t.email,bio:t.bio}),V=Object(s.a)(z,2),q=V[0],Z=V[1],K=function(e){Z(Object(g.a)(Object(g.a)({},q),{},Object(O.a)({},e.target.name,e.target.value)))},Q=function(){var e=Object(x.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=7;break}return(n=new FormData).append("file",t),n.append("upload_preset","socio1508"),n.append("cloud_name","socio1508"),e.next=7,fetch("https://api.cloudinary.com/v1_1/socio1508/image/upload",{method:"POST",body:n}).then((function(e){return e.json()})).then((function(e){E=e.url,X()})).catch((function(e){return console.log(e)}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(x.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/user/update",{method:"PUT",headers:{"Content-Type":"application/json","x-auth-token":localStorage.getItem("socio_token")},body:JSON.stringify({name:q.name?q.name:t.name,email:q.email?q.email:t.email,bio:q.bio?q.bio:t.bio,url:E||t.profile})}).then((function(e){return e.json()})).then((function(e){e.error?(P(e.msg),Y(!1)):(localStorage.setItem("user",JSON.stringify(e.result)),l({type:"UPDATE_PROFILE",payload:e.result}),Y(!1),H(),n(JSON.parse(localStorage.getItem("user"))),a(JSON.parse(localStorage.getItem("user")).profile))})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(T.jsxs)("div",{children:[Object(T.jsx)(y.a,{className:"mx-3",style:{backgroundColor:"transparent",border:"none"},onClick:H,children:Object(T.jsx)("i",{className:"fas fa-pencil-alt",onClick:H})}),Object(T.jsxs)(w.a,{className:"py-3",style:{color:"black"},isOpen:M,toggle:H,children:[Object(T.jsxs)(v.a,{children:[Object(T.jsx)(N.a,{color:"danger",isOpen:j,toggle:function(){return b(!1)},children:f}),Object(T.jsxs)(k.a,{children:[Object(T.jsxs)(S.a,{children:[Object(T.jsx)(C.a,{htmlFor:"name",children:"Name"}),Object(T.jsx)(_.a,{className:"my-2 ",type:"text",name:"name",id:"name",value:q.name,onChange:K})]}),Object(T.jsxs)(S.a,{children:[Object(T.jsx)(C.a,{htmlFor:"email",children:"Email"}),Object(T.jsx)(_.a,{className:"my-2 ",type:"text",name:"email",id:"email",value:q.email,onChange:K})]}),Object(T.jsxs)(S.a,{children:[Object(T.jsx)(C.a,{htmlFor:"bio",children:"Bio"}),Object(T.jsx)("textarea",{id:"bio",name:"bio",className:"my-2 form-control",rows:"3",value:q.bio,onChange:K})]}),Object(T.jsxs)(S.a,{children:[Object(T.jsx)("input",{ref:r,onChange:function(e){return function(e){if(!e.type.includes("image")||e.type.includes("gif"))return P("Only images are allowed"),b(!0),J(""),void setTimeout((function(){return b(!1)}),5e3);setTimeout((function(){return Q(e)}),1500),J(e.name)}(e.target.files[0])},type:"file",style:{display:"none"},multiple:!1}),Object(T.jsxs)("div",{className:"d-flex align-items-end",children:[Object(T.jsx)(y.a,{onClick:function(e){return r.current&&r.current.click()},className:"mt-4 bg-white text-dark fw-bolder",disabled:W,children:"Update Picture"}),Object(T.jsx)("p",{className:"text-muted ms-3",children:R.length>25?R.slice(0,25)+"...":R})]})]})]})]}),Object(T.jsxs)(I.a,{children:[Object(T.jsx)(y.a,{color:"primary",className:"me-3",onClick:X,children:W?"...":"Update"}),Object(T.jsx)(y.a,{color:"secondary",onClick:H,children:"Cancel"})]})]})]})},Q=function(){var e=Object(c.useState)(JSON.parse(localStorage.getItem("user"))),t=Object(s.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(JSON.parse(localStorage.getItem("user")).profile),o=Object(s.a)(r,2),i=o[0],l=o[1],d=Object(c.useState)(0),u=Object(s.a)(d,2),j=u[0],b=u[1],m=Object(c.useState)([]),h=Object(s.a)(m,2),f=h[0],p=h[1];Object(c.useEffect)((function(){x()}),[f,n]);var x=function(){fetch("/post/myposts",{method:"GET",headers:{"x-auth-token":localStorage.getItem("socio_token")}}).then((function(e){return e.json()})).then((function(e){p(e.posts)})).catch((function(e){return console.log(e)}))};return Object(T.jsxs)("div",{className:"container mt-5",children:[Object(T.jsxs)("div",{className:"row pb-4",children:[Object(T.jsx)("div",{className:"col-md-4 col-12 d-flex flex-column justify-content-center mb-4 align-items-center",children:Object(T.jsx)("img",{src:i||"https://images.unsplash.com/photo-1485423036251-8b2a2909899f?ixid=MnwxMjA3fDB8MHxzZWFyY2h8MTl8fHBvcnRyYWl0fGVufDB8MnwwfHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",alt:"Profile",style:{width:"240px",height:"240px",borderRadius:"50%"}})}),Object(T.jsxs)("div",{className:"col-md-6 col-12 p-4",children:[Object(T.jsxs)("p",{className:"fw-bolder fs-1 d-flex",children:[n.name,Object(T.jsx)(K,{sentData:n,changeUser:a,changeProfile:l})]}),Object(T.jsx)("p",{className:"text-muted fs-5 pb-2",children:n.bio}),Object(T.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(T.jsxs)("p",{className:"fw-bold fs-5",children:[f&&f.length," posts"]}),Object(T.jsxs)("p",{className:"fw-bold fs-5",children:[n.followers.length," followers"]}),Object(T.jsxs)("p",{className:"fw-bold fs-5",children:[n.following.length," following"]})]})]})]}),Object(T.jsxs)("div",{className:"container mt-4 d-flex border-bottom border-white fw-bolder fs-3",children:[Object(T.jsx)("div",{onClick:function(){return b(0)},className:"container mb-3 text-center border-end border-white",style:{cursor:"pointer",color:j?"gray":"white"},children:"Images"}),Object(T.jsx)("div",{onClick:function(){return b(1)},className:"container mb-3 text-center",style:{cursor:"pointer",color:j?"white":"gray"},children:"Tweets"})]}),Object(T.jsx)("div",{className:"posts d-flex flex-wrap justify-content-start my-4",children:!j&&f.filter((function(e){return""!==e.photo})).map((function(e){return Object(T.jsx)("div",{className:"m-4",children:Object(T.jsx)("img",{src:e.photo,alt:e.title,style:{width:"300px",height:"300px"}})},e._id)}))}),j&&f.filter((function(e){return""===e.photo})).map((function(e){return Object(T.jsxs)("div",{children:[Object(T.jsx)("div",{className:"col-md-10 col-12 my-4",children:Object(T.jsx)(D.a,{color:"dark",className:"p-3 border",children:Object(T.jsxs)(B.a,{children:[Object(T.jsx)(F.a,{tag:"h5",children:e.title}),Object(T.jsx)(M.a,{className:"fs-6",children:e.body})]})})}),Object(T.jsx)("hr",{width:"83.5%"})]},e._id)}))]})},X=function(e,t){var n=t.type,c=t.payload;return"USER"===n?c:"CLEAR"===n?null:"UPDATE"===n?Object(g.a)(Object(g.a)({},e),{},{followers:c.followers,following:c.following}):"UPDATE_PROFILE"===n?c:e},$=function(){var e=Object(o.h)().id,t=Object(c.useContext)(ne),n=t.state,a=t.dispatch,r=Object(c.useState)(0),i=Object(s.a)(r,2),l=i[0],d=i[1],u=Object(c.useState)({}),j=Object(s.a)(u,2),b=j[0],m=j[1],h=Object(c.useState)([]),f=Object(s.a)(h,2),O=f[0],g=f[1],w=Object(c.useState)(!1),v=Object(s.a)(w,2),N=v[0],k=v[1],S=Object(c.useState)(JSON.parse(localStorage.getItem("user")).following.includes(e)),C=Object(s.a)(S,2),_=C[0],I=C[1];Object(c.useEffect)((function(){P()}),[O,n]);var P=function(){var t=Object(x.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/user/".concat(e),{method:"GET",headers:{"x-auth-token":localStorage.getItem("socio_token")}}).then((function(e){return e.json()})).then((function(e){g(e.posts),m(e.user)})).catch((function(e){return console.log(e)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),E=function(){var t=Object(x.a)(p.a.mark((function t(n,c){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return k(!0),t.next=3,fetch("/user/".concat(n?"unfollow":"follow"),{method:"PUT",headers:{"Content-Type":"application/json","x-auth-token":localStorage.getItem("socio_token")},body:JSON.stringify({followId:e})}).then((function(e){return e.json()})).then((function(t){a({type:"UPDATE",payload:{following:t.result.following,followers:t.result.followers}}),localStorage.setItem("user",JSON.stringify(t.result)),I(JSON.parse(localStorage.getItem("user")).following.includes(e)),c<1&&n&&E(n,c+1),k(!1)})).catch((function(e){return console.log(e)}));case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return Object(T.jsxs)("div",{className:"container mt-5",children:[Object(T.jsxs)("div",{className:"row pb-4",children:[Object(T.jsx)("div",{className:"col-md-4 col-12 d-flex justify-content-center mb-4 align-items-center",children:Object(T.jsx)("img",{src:b.profile?b.profile:"https://images.unsplash.com/photo-1485423036251-8b2a2909899f?ixid=MnwxMjA3fDB8MHxzZWFyY2h8MTl8fHBvcnRyYWl0fGVufDB8MnwwfHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",alt:"Profile",style:{width:"240px",height:"240px",borderRadius:"50%"}})}),Object(T.jsxs)("div",{className:"col-md-6 col-12 p-4",children:[Object(T.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(T.jsx)("p",{className:"fw-bolder fs-1",children:b.name}),n&&e!==n._id&&Object(T.jsx)(y.a,{disabled:N,color:"success",onClick:function(){return E(_,0)},children:_?"Unfollow":"Follow"})]}),Object(T.jsx)("p",{className:"fw-bolder text-muted pb-2",children:b.email}),Object(T.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(T.jsxs)("p",{className:"fw-bold fs-5 me-2",children:[O.length," posts"]}),Object(T.jsxs)("p",{className:"fw-bold fs-5 me-2",children:[b.followers&&b.followers.length," followers"]}),Object(T.jsxs)("p",{className:"fw-bold fs-5 ",children:[b.following&&b.following.length," following"]})]})]})]}),Object(T.jsxs)("div",{className:"container mt-4 d-flex border-bottom border-white fw-bolder fs-3",children:[Object(T.jsx)("div",{onClick:function(){return d(0)},className:"container mb-3 text-center border-end border-white",style:{cursor:"pointer",color:l?"gray":"white"},children:"Images"}),Object(T.jsx)("div",{onClick:function(){return d(1)},className:"container mb-3 text-center",style:{cursor:"pointer",color:l?"white":"gray"},children:"Tweets"})]}),Object(T.jsx)("div",{className:"posts d-flex flex-wrap justify-content-start my-4",children:!l&&O.filter((function(e){return""!==e.photo})).map((function(e){return Object(T.jsx)("div",{title:e.title,className:"m-4",children:Object(T.jsx)("img",{src:e.photo,alt:e.title,style:{width:"300px",height:"300px"}})},e._id)}))}),l&&O.filter((function(e){return""===e.photo})).map((function(e){return Object(T.jsxs)("div",{children:[Object(T.jsx)("div",{className:"col-md-10 col-12 my-4",children:Object(T.jsx)(D.a,{color:"dark",className:"p-3 border",children:Object(T.jsxs)(B.a,{children:[Object(T.jsx)(F.a,{tag:"h5",children:e.title}),Object(T.jsx)(M.a,{className:"fs-6",children:e.body})]})})}),Object(T.jsx)("hr",{width:"83.5%"})]},e._id)}))]})},ee=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(JSON.parse(localStorage.getItem("user"))),o=Object(s.a)(r,2),l=o[0],d=(o[1],Object(c.useState)(!1)),u=Object(s.a)(d,2),j=u[0],b=u[1],m=function(){return b((function(e){return!e}))};Object(c.useEffect)((function(){h()}),[n]);var h=function(){var e=Object(x.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/post/getFollowedPost",{method:"GET",headers:{"x-auth-token":localStorage.getItem("socio_token")}}).then((function(e){return e.json()})).then((function(e){a(e.posts)})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(x.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/post/".concat(n),{method:"PUT",headers:{"Content-Type":"application/json","x-auth-token":localStorage.getItem("socio_token")},body:JSON.stringify({postId:t})}).then((function(e){return e.json()})).then((function(e){return console.log("A")}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),O=function(){var e=Object(x.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0)){e.next=3;break}return e.next=3,fetch("/post/comment",{method:"PUT",headers:{"Content-Type":"application/json","x-auth-token":localStorage.getItem("socio_token")},body:JSON.stringify({text:t,postId:n})}).then((function(e){return e.json()})).then((function(e){console.log("C")})).catch((function(e){return console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=function(){var e=Object(x.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/post/".concat(t),{method:"DELETE",headers:{"x-auth-token":localStorage.getItem("socio_token")}}).then((function(e){return e.json()})).then((function(e){m()})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(T.jsx)("div",{className:"container my-5",children:n&&n.map((function(e){return Object(T.jsxs)("div",{children:[Object(T.jsx)("div",{className:"col-md-10 col-12 my-4",children:Object(T.jsxs)(D.a,{color:"dark",className:"p-3",children:[Object(T.jsxs)(F.a,{tag:"h4",color:"black",className:"mb-4 fw-bolder d-flex justify-content-between align-items-center",children:[Object(T.jsxs)("div",{className:"d-flex justify-content-start align-items-center",children:[Object(T.jsx)("img",{src:e.posted_by.profile?e.posted_by.profile:"https://images.unsplash.com/photo-1485423036251-8b2a2909899f?ixid=MnwxMjA3fDB8MHxzZWFyY2h8MTl8fHBvcnRyYWl0fGVufDB8MnwwfHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",alt:"",className:"me-2 border border-white",style:{width:"40px",height:"40px",borderRadius:"50%"}}),Object(T.jsx)(i.b,{className:"text-decoration-none text-white",to:"/profile/".concat(e.posted_by._id),children:e.posted_by.name})]}),e.posted_by._id===l._id&&Object(T.jsxs)(R.a,{style:{cursor:"pointer"},direction:"left",isOpen:j,toggle:m,children:[Object(T.jsx)(J.a,{tag:"span","data-toggle":"dropdown","aria-expanded":j,children:Object(T.jsx)("i",{className:"fas fa-ellipsis-v"})}),Object(T.jsx)(U.a,{className:"bg-dark text-white border fw-bolder px-2 mt-5",children:Object(T.jsx)("div",{onClick:function(){return g(e._id)},children:"Delete"})})]})]}),e.photo?Object(T.jsx)("div",{className:"d-flex justify-content-center",children:Object(T.jsx)("img",{src:e.photo,style:{maxWidth:"100%",maxHeight:"500px"},alt:"Image",onDoubleClick:function(){return f(e._id,e.likes.includes(l._id))}})}):null,Object(T.jsxs)(B.a,{children:[Object(T.jsx)(F.a,{tag:"h5",children:e.title}),Object(T.jsx)(M.a,{className:"fs-6",style:{color:"gray"},children:e.body}),Object(T.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[e.likes.includes(l.id)?Object(T.jsx)("i",{className:"fas fa-2x my-1 fa-heart",style:{color:"red",cursor:"pointer"},onClick:function(){return f(e._id,"dislike")}}):Object(T.jsx)("i",{className:"far fa-2x my-1 fa-heart",style:{color:"red",cursor:"pointer"},onClick:function(){return f(e._id,"like")}}),Object(T.jsxs)(M.a,{className:"fs-6 mt-2",style:{color:"gray"},children:[e.likes.length," likes \xb7 ",e.comments.length," ","comments"]})]}),Object(T.jsx)(k.a,{onSubmit:function(t){t.preventDefault(),O(t.target[0].value,e._id),t.target[0].value=""},children:Object(T.jsxs)("div",{className:"d-flex justify-content-between align-items-end",children:[Object(T.jsx)(_.a,{type:"text",style:te,name:"comment",id:"comment",placeholder:"Add comment"}),Object(T.jsx)(y.a,{color:"primary",children:"Post"})]})}),Object(T.jsx)(A.a,{className:"text-muted mt-4 fs-6",style:{cursor:"pointer"},children:Object(T.jsx)(L,{comments:e.comments,postId:e._id})})]})]})}),Object(T.jsx)("hr",{width:"83.5%"})]},e._id)}))})},te={border:"none",marginTop:"30px",marginRight:"10px",borderRadius:"1px",borderBottom:"1px solid gray",background:"transparent",color:"white"},ne=Object(c.createContext)(),ce=function(){var e=Object(o.g)(),t=Object(c.useContext)(ne),n=(t.state,t.dispatch),a=JSON.parse(localStorage.getItem("user"));return Object(c.useEffect)((function(){a?n({type:"USER",payload:a}):e.push("/auth")}),[]),Object(T.jsx)(o.d,{children:a?Object(T.jsxs)(c.Fragment,{children:[Object(T.jsx)(o.b,{exact:!0,path:"/",component:W}),Object(T.jsx)(o.b,{path:"/auth",component:V}),Object(T.jsx)(o.b,{exact:!0,path:"/profile",component:Q}),Object(T.jsx)(o.b,{path:"/profile/:id",component:$}),Object(T.jsx)(o.b,{path:"/following/posts",component:ee}),Object(T.jsx)(o.a,{path:"**",to:"/"})]}):Object(T.jsx)(o.b,{to:"/auth",component:V})})},ae=function(){var e=Object(c.useReducer)(X,null),t=Object(s.a)(e,2),n=t[0],a=t[1];return Object(T.jsx)(ne.Provider,{value:{state:n,dispatch:a},children:Object(T.jsxs)(i.a,{children:[Object(T.jsx)(E,{}),Object(T.jsx)(ce,{})]})})},re=(n(97),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,123)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))});r.a.render(Object(T.jsx)(ae,{}),document.getElementById("root")),re()}},[[98,1,2]]]);
//# sourceMappingURL=main.9e19ee97.chunk.js.map